# Быстрый старт

## 1. Создание и активация виртуальной среды

**macOS/Linux:**
```bash
python3 -m venv venv
source venv/bin/activate
```

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

## 2. Установка зависимостей

```bash
pip install -r requirements.txt
```

**Важно:** Все последующие команды должны выполняться в активированной виртуальной среде!

## 3. Установка wkhtmltopdf (для генерации PDF)

**macOS:**
```bash
brew install wkhtmltopdf
```

## 4. Генерация PDF (опционально)

**Убедитесь, что виртуальная среда активирована!**

```bash
python scripts/generate_pdf.py
```

## 5. Запуск веб-сервера

**Убедитесь, что виртуальная среда активирована!**

```bash
python scripts/server.py
```

## 6. Инициализация истории изменений (опционально)

**Убедитесь, что виртуальная среда активирована!**

Для существующих документов можно инициализировать историю:

```bash
python scripts/init_history.py
```

Это создаст начальные записи в истории для всех существующих документов.

## 7. Открыть в браузере

http://localhost:8000

## Примеры документов

В проекте уже есть примеры документов:
- Приказы
- Распоряжения  
- Положения
- Регламенты

Все документы находятся в папке `documents/`

## Создание нового документа

1. Создайте файл `.md` в соответствующей папке:
   ```
   documents/{организация}/{отдел}/{тип}/{имя_файла}.md
   ```

2. Добавьте YAML front matter в начало файла:
   ```markdown
   ---
   type: приказ
   organization: ООО "Компания"
   department: Отдел кадров
   number: ПР-002
   date: 2024-01-25
   title: Название документа
   status: действующий
   ---
   
   # Содержимое документа
   ```

3. Перезапустите генерацию PDF (если нужно):
   ```bash
   python scripts/generate_pdf.py
   ```
   Или используйте скрипт-обертку:
   ```bash
   ./generate_pdf.sh  # macOS/Linux
   # или
   generate_pdf.bat  # Windows
   ```

4. Обновите страницу в браузере - новый документ появится в списке

## Отслеживание изменений

Система автоматически отслеживает изменения документов через Git hooks:

1. При каждом коммите изменений документов автоматически создается запись в истории
2. Автор определяется из Git конфигурации
3. В веб-интерфейсе на странице документа можно просмотреть историю изменений
4. Можно просмотреть любую предыдущую версию документа

### Ручное отслеживание

```python
from pathlib import Path
from scripts.version_tracker import VersionTracker

tracker = VersionTracker("documents", "version_history")
tracker.track_change(
    Path("documents/org/dept/doc.md"),
    author="Иванов И.И.",
    comment="Обновление документа"
)
```

