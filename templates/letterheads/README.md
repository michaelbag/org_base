# Шаблоны бланков для документов

Эта директория содержит PDF шаблоны фирменных бланков для различных типов документов.

## Структура

Шаблоны должны быть в формате PDF размера A4 и именоваться по типу документа:

- `приказ.pdf` - для приказов
- `распоряжение.pdf` - для распоряжений
- `письмо.pdf` - для писем
- `регламент.pdf` - для регламентов
- `положение.pdf` - для положений
- `default.pdf` - общий шаблон (используется, если шаблон для конкретного типа не найден)

## Использование

### 1. Загрузка шаблона через веб-интерфейс

Используйте API для загрузки шаблонов:

```bash
# Загрузка шаблона
curl -X POST http://localhost:8000/api/letterhead/upload \
  -F "file=@путь/к/файлу.pdf" \
  -F "document_type=приказ"

# Список загруженных шаблонов
curl http://localhost:8000/api/letterhead/list

# Удаление шаблона
curl -X DELETE http://localhost:8000/api/letterhead/приказ
```

### 2. Ручная загрузка

Просто скопируйте PDF файл бланка в эту директорию с соответствующим именем.

## Настройка документа для печати на бланке

В метаданных документа добавьте поле:

```yaml
---
type: приказ
organization: ООО "Компания"
...
print_on_letterhead: да
status: действующий
---
```

**Важно:**
- Бланк применяется только если документ **не** в статусе "в разработке" или "черновик"
- При печати на бланке технические данные (метаданные, порядок внесения изменений) автоматически скрываются
- Если шаблон для конкретного типа не найден, используется `default.pdf` (если существует)

## Формат шаблона

- **Размер:** A4 (210 × 297 мм)
- **Формат:** PDF
- **Ориентация:** Вертикальная (Portrait)

Шаблон должен содержать фирменный бланк с логотипом, реквизитами организации и другими элементами оформления. Контент документа будет наложен поверх бланка.

## Примеры

### Пример метаданных с бланком

```yaml
---
type: приказ
organization: ООО "Компания"
department: Отдел кадров
number: ПР-001
date: 2024-01-15
title: О назначении ответственного лица
status: действующий
print_on_letterhead: да
---
```

### Пример для письма

```yaml
---
type: исходящее письмо
organization: ООО "Компания"
department: Отдел информационных технологий
number: Исх. № 123
date: 2024-12-01
title: Претензия по договору
status: действующий
print_on_letterhead: да
---
```

## Технические детали

При генерации PDF с бланком:

1. Сначала генерируется PDF контента документа (без технических данных, если используется бланк)
2. Затем контент накладывается на шаблон бланка с помощью библиотеки pypdf
3. Итоговый PDF сохраняется в директории `pdf/`

Временные файлы контента автоматически удаляются после объединения с бланком.

